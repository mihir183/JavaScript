<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Add to Cart ( with Local Storage )</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
            integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">

        <!-- Font Awsome -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" integrity="sha512-DxV+EoADOkOygM4IR9yXP8Sb2qwgidEmeqAEmDKIOfPRQZOWbXCzLC6vjbZyy0vPisbH2SyW27+ddLVCN+OMzQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />

        <link rel="shortcut icon" href="assets/images/logo.png" type="image/x-icon">
        <style>
            body{
                background-image: url("assets/images/logo.png");
                background-repeat: no-repeat;
                background-size: cover;
            }
        </style>
    </head>

    <body>
        <div class="container my-5 bg-light p-5 rounded-3">
            <div class="row">
                <div class="col">
                    <h2 class="text-capitalize">add movie card</h2>
                </div>
                <div class="col">
                    <div class="row gap-1 align-items-center flex-row-reverse">
                        <div class="col col-md-6">
                            <input type="search" class="form-control" id="search" placeholder="Search Movie">
                        </div>
                        <div class="col col-1">
                            <i class="fa-solid fa-cart-shopping"><sup id="count">0</sup></i>
                        </div>
                    </div>
                </div>
            </div>
            <form id="myForm">
                <label for="title" class="form-label text-capitalize">title</label>
                <input type="text" class="form-control mb-3" name="title" id="title" autofocus>
                <label for="url" class="form-label text-capitalize">url</label>
                <input type="url" class="form-control mb-3" name="url" id="url" autocomplete="on">
                <label for="rating" class="form-label text-capitalize">rating</label>
                <select name="rating" id="rating" class="form-control mb-3 text-capitalize">
                    <option value="" disabled selected>-- select rating --</option>
                    <option value="☆☆☆☆☆">☆☆☆☆☆</option>
                    <option value="★☆☆☆☆">★☆☆☆☆</option>
                    <option value="★★☆☆☆">★★☆☆☆</option>
                    <option value="★★★☆☆">★★★☆☆</option>
                    <option value="★★★★☆">★★★★☆</option>
                    <option value="★★★★★">★★★★★</option>
                </select>
                <label for="category" class="form-label text-capitalize">category</label>
                <select name="category" id="category" class="form-control mb-3 text-capitalize">
                    <option value="" disabled selected>-- select category --</option>
                    <option value="drama">drama</option>
                    <option value="horron">horron</option>
                    <option value="comedy">comedy</option>
                    <option value="action">action</option>
                    <option value="thriller">thriller</option>
                    <option value="romantic">romantic</option>
                </select>
                <label for="discription" class="form-label text-capitalize">discription</label>
                <textarea name="discription" id="discription" class="form-control mb-3"></textarea>
    
                <button type="button" class="btn btn-primary" id="submit">add</button>
                <button type="button" class="btn btn-danger" id="clear">clear all</button>
            </form>

        </div>

        <div class="container my-4 py-3 bg-light rounded-3">
            <div class="row justify-content-center" id="output"></div>
        </div>

        <script>

            let blogList = JSON.parse(localStorage.getItem('movies'))

            let title = document.querySelector('#title')
            let url = document.querySelector('#url')
            let rating = document.querySelector('#rating')
            let category = document.querySelector('#category')
            let discription = document.querySelector('#discription')
            let search = document.querySelector('#search')

            show()

            // Add Data in Local Storage
            document.querySelector("#submit").addEventListener('click', () => {

                if(title.value && url.value && rating.value){    

                    const arr = blogList || []
                    const id = Date.now()
    
                    movie_obj = {
                        id,
                        title: title.value,
                        url: url.value,
                        rating: rating.value,
                        category: category.value,
                        discription: discription.value
                    }
    
                    arr.push(movie_obj)
                    localStorage.setItem("movies", JSON.stringify(arr))
                    document.querySelector("#myForm").reset()
                    show()

                }else{
                    alert("Enter Data")
                }

            })

            // Clear Local Storage
            document.querySelector("#clear").addEventListener('click',()=>{
                localStorage.clear()
                show()
            })

            // Searching
            document.querySelector("#search").addEventListener('input',()=>{
                // alert('m')

            })

            // Show Data from Local Storage
            function show() {
                blogList = JSON.parse(localStorage.getItem('movies'))
                let output = ""

                if (!blogList || blogList.length === 0) {
                    output = `
                        <div class="col-md-3 text-center text-capitalize">no data</div>
                    `
                    document.querySelector("#output").innerHTML = output
                }
                else{
                    blogList.forEach((ele,index) => {
                        output += `
                            <div class="col-md-3">
                                <div class="card shadow-lg">
                                    <img src=${ele.url} class="card-img-top" alt="Movie Poster" height="300">

                                    <div class="card-body text-center">
                                        <ul class="list-unstyled text-capitalize">
                                            <li><strong>Title:</strong> ${ele.title}</li>
                                            <li><strong>Rating:</strong> ${ele.rating}</li>
                                            <li><strong>category:</strong> ${ele.category}</li>
                                            <li><strong>discription:</strong> ${ele.discription}</li>
                                            <li class="mt-2">
                                                <button class="btn btn-info">add to cart</button>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        `
                    });

                    document.querySelector("#output").innerHTML = output
                }
            }
        </script>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q"
            crossorigin="anonymous"></script>
    </body>

</html>

